<!DOCTYPE html>
<html xml:lang="ja" lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>HTML CAPTURE | BLACKFLAG</title>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/common.css">

<style>
.preview {
	margin-top: 10px;
}
.preview img {
	max-width: 100%;
	height: auto;
	border: 1px solid #ccc;
}
</style>
</head>

<body>
<h1>HTML CAPTURE</h1>

<dl>
	<dt>写真</dt>
	<dd>
		<div>
			<label><span>背面カメラ</span>
			<input type="file" capture="environment" accept="image/*" class="photo-capture">
			</label>
			<div class="preview"></div>
		</div>

		<div>
			<label><span>インカメラ</span>
			<input type="file" capture="user" accept="image/*" class="photo-capture">
			</label>
			<div class="preview"></div>
		</div>
	</dd>

	<dt>動画</dt>
	<dd>
		<div>
			<label><span>背面カメラ</span>
			<input type="file" capture="environment" accept="video/*">
			</label>
		</div>

		<div>
			<label><span>インカメラ</span>
			<input type="file" capture="user" accept="video/*">
			</label>
		</div>
	</dd>
</dl>

<small>Home <a href="https://sgn-test.github.io/">Back</a></small>

<script>
document.querySelectorAll('.photo-capture').forEach(input => {
	input.addEventListener('change', function(e) {
		const file = e.target.files[0];
		if (!file) return;

		const preview = e.target.closest('div').querySelector('.preview');
		preview.innerHTML = '';

		const img = document.createElement('img');
		img.src = URL.createObjectURL(file);
		preview.appendChild(img);

		// メモリ解放（画像読み込み後）
		img.onload = () => {
			URL.revokeObjectURL(img.src);
		};
	});
});
</script>

</body>
</html>
